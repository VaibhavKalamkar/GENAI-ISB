<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Pack My Bag - Front-End Only</title>
  <style>
    /* Minimal inline CSS */
    body {
      font-family: Arial, sans-serif;
      background-color: #f8fff4;
      margin: 0;
      padding: 0;
    }
    header, footer {
      background-color: #c4f1c4;
      padding: 1rem;
      text-align: center;
    }
    h1, h2 {
      margin-bottom: 0.5rem;
    }
    .container {
      max-width: 800px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    label {
      display: block;
      margin-top: 1rem;
    }
    input, select {
      width: 100%;
      padding: 0.5rem;
    }
    button {
      margin-top: 1rem;
      padding: 0.75rem 1.5rem;
      background-color: #5cb85c;
      color: #fff;
      border: none;
      cursor: pointer;
      border-radius: 4px;
    }
    .packing-list {
      background-color: #fff;
      padding: 1rem;
      margin-top: 2rem;
      border-radius: 8px;
    }
    .item-category {
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>Pack My Bag</h1>
  </header>

  <div class="container">
    <!-- PAGE 1: Start Packing -->
    <section id="page1">
      <h2>Never Forget What to Pack Again</h2>
      <p>AI-powered packing lists customized for your trip.</p>
      <button onclick="showPage('page2')">Start Packing</button>
    </section>

    <!-- PAGE 2: Trip Details Form -->
    <section id="page2" style="display: none;">
      <h2>Enter Trip Details</h2>
      <label for="destination">Destination(s):</label>
      <input type="text" id="destination" placeholder="e.g. Paris, Coorg" />

      <label for="travelDates">Travel Dates:</label>
      <input type="text" id="travelDates" placeholder="e.g. 2023-05-10 to 2023-05-15" />

      <label for="duration">Duration:</label>
      <input type="number" id="duration" placeholder="Number of days" />

      <label for="travelType">Travel Type:</label>
      <select id="travelType">
        <option>Leisure</option>
        <option>Business</option>
        <option>Adventure</option>
        <option>Backpacking</option>
      </select>

      <label for="activities">Activities Planned:</label>
      <input type="text" id="activities" placeholder="Hiking, beach, city tours" />

      <label for="accommodationType">Accommodation Type:</label>
      <select id="accommodationType">
        <option>Hotel</option>
        <option>Hostel</option>
        <option>Camping</option>
        <option>Airbnb</option>
      </select>

      <label for="luggageType">Luggage Type:</label>
      <select id="luggageType">
        <option>Checked-in</option>
        <option>Cabin only</option>
        <option>Backpack</option>
      </select>

      <label for="gender">Gender:</label>
      <select id="gender">
        <option value="">Select</option>
        <option>Male</option>
        <option>Female</option>
        <option>Other</option>
      </select>

      <label for="kids">Traveling with kids?</label>
      <select id="kids">
        <option value="">No</option>
        <option>Yes</option>
      </select>

      <label for="firstTime">First-time Traveler?</label>
      <select id="firstTime">
        <option value="">No</option>
        <option>Yes</option>
      </select>

      <label for="specialNeeds">Special Needs:</label>
      <input type="text" id="specialNeeds" placeholder="Meds, baby stuff, camera gear..." />

      <button onclick="generatePackingList()">Generate Packing List</button>
    </section>

    <!-- PAGE 3: Packing List Display -->
    <section id="page3" style="display: none;">
      <h2>Packing List</h2>
      <div id="packingListOutput" class="packing-list">
        <!-- AI-generated content will appear here -->
      </div>
    </section>
  </div>

  <footer>
    <p>&copy; 2023 Pack My Bag</p>
  </footer>

  <script>
    // ----------------------------------------
    // 0. Mistral AI Key & Basic Config
    // ----------------------------------------
    // WARNING: This is not secure for production use.
    // Anyone can view-source and see your API key.
    const MISTRAL_API_KEY = "Qo3UkuQbLN35xKltzOVEQ0nLfgBG7mvq";

    // ----------------------------------------
    // 1. Simple Page Navigation
    // ----------------------------------------
    function showPage(pageId) {
      document.getElementById('page1').style.display = 'none';
      document.getElementById('page2').style.display = 'none';
      document.getElementById('page3').style.display = 'none';
      document.getElementById(pageId).style.display = 'block';
    }

    // ----------------------------------------
    // 2. Collect Form Data & Call Mistral
    // ----------------------------------------
    async function generatePackingList() {
      // Gather the 11 fields
      const data = {
        destination: document.getElementById('destination').value,
        travelDates: document.getElementById('travelDates').value,
        duration: document.getElementById('duration').value,
        travelType: document.getElementById('travelType').value,
        activities: document.getElementById('activities').value,
        accommodationType: document.getElementById('accommodationType').value,
        luggageType: document.getElementById('luggageType').value,
        gender: document.getElementById('gender').value,
        kids: document.getElementById('kids').value,
        firstTime: document.getElementById('firstTime').value,
        specialNeeds: document.getElementById('specialNeeds').value
      };

      // Build a prompt (or request body) for Mistral
      const prompt = `
        You are a travel packing assistant.
        The user is going to ${data.destination} from ${data.travelDates} for ${data.duration} days.
        Travel type: ${data.travelType}. Activities: ${data.activities}.
        Accommodation: ${data.accommodationType}, Luggage: ${data.luggageType}.
        Gender: ${data.gender}, With kids: ${data.kids}, First-time: ${data.firstTime}, Special needs: ${data.specialNeeds}.
        Please provide a categorized packing list into Clothes, Toiletries, Gadgets, Travel Docs, Meds, Optional Extras.
      `;

      try {
        // Make a direct POST request to Mistral
        // *Placeholder URL & request formatâ€”adjust as per Mistral docs*
        const response = await fetch("https://api.mistralai.com/v1/generate", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${MISTRAL_API_KEY}`
          },
          body: JSON.stringify({
            prompt: prompt,
            // Possibly other parameters like temperature, max_tokens, etc.
          })
        });

        if (!response.ok) {
          throw new Error(`Mistral API error: ${response.statusText}`);
        }

        // Example: Mistral might return { text: "...packing list..." }
        // or a more complex JSON object. Adjust parsing accordingly.
        const result = await response.json();
        
        // Let's assume the final text is in result.text
        const packingText = result.text || JSON.stringify(result);

        // Show the "Packing List" page
        showPage('page3');
        
        // Display the result in #packingListOutput
        const outputEl = document.getElementById('packingListOutput');
        outputEl.innerHTML = `<pre>${packingText}</pre>`;

      } catch (err) {
        alert("Error: " + err.message);
        console.error(err);
      }
    }
  </script>
</body>
</html>
