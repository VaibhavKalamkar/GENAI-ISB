<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Pack My Bag - Front-End Only</title>
  <!-- Link to external CSS -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Optional: Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link 
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" 
    rel="stylesheet">
</head>
<body>

  <!-- HEADER -->
  <header>
    <h1>Pack My Bag</h1>
  </header>

  <div class="container">
    <!-- PAGE 1: Landing Section -->
    <section id="page1" class="page active">
      <h2>Never Forget What to Pack Again</h2>
      <p>AI-powered packing lists customized for your trip.</p>
      <button class="cta-btn" onclick="showPage('page2')">Start Packing</button>
    </section>

    <!-- PAGE 2: Trip Details Form -->
    <section id="page2" class="page">
      <h2>Enter Trip Details</h2>
      <label for="destination">Destination(s):</label>
      <input type="text" id="destination" placeholder="e.g. Paris, Coorg" />

      <label for="travelDates">Travel Dates:</label>
      <input type="text" id="travelDates" placeholder="e.g. 2023-05-10 to 2023-05-15" />

      <label for="duration">Duration:</label>
      <input type="number" id="duration" placeholder="Number of days" />

      <label for="travelType">Travel Type:</label>
      <select id="travelType">
        <option>Leisure</option>
        <option>Business</option>
        <option>Adventure</option>
        <option>Backpacking</option>
      </select>

      <label for="activities">Activities Planned:</label>
      <input type="text" id="activities" placeholder="Hiking, beach, city tours" />

      <label for="accommodationType">Accommodation Type:</label>
      <select id="accommodationType">
        <option>Hotel</option>
        <option>Hostel</option>
        <option>Camping</option>
        <option>Airbnb</option>
      </select>

      <label for="luggageType">Luggage Type:</label>
      <select id="luggageType">
        <option>Checked-in</option>
        <option>Cabin only</option>
        <option>Backpack</option>
      </select>

      <label for="gender">Gender:</label>
      <select id="gender">
        <option value="">Select</option>
        <option>Male</option>
        <option>Female</option>
        <option>Other</option>
      </select>

      <label for="kids">Traveling with kids?</label>
      <select id="kids">
        <option value="">No</option>
        <option>Yes</option>
      </select>

      <label for="firstTime">First-time Traveler?</label>
      <select id="firstTime">
        <option value="">No</option>
        <option>Yes</option>
      </select>

      <label for="specialNeeds">Special Needs:</label>
      <input type="text" id="specialNeeds" placeholder="Meds, baby stuff, camera gear..." />

      <button class="cta-btn" onclick="generatePackingList()">Generate Packing List</button>
    </section>

    <!-- PAGE 3: Packing List Display -->
    <section id="page3" class="page">
      <h2>Packing List</h2>
      <div id="packingListOutput" class="packing-list">
        <!-- Mistral AI response will appear here -->
      </div>
    </section>
  </div>

  <!-- FOOTER -->
  <footer>
    <p>&copy; 2023 Pack My Bag</p>
  </footer>

  <!-- JAVASCRIPT -->
  <script>
    /********************************************
     *    1) Insert Your Mistral API Key Here   *
     ********************************************/
    // Replace "YOUR_MISTRAL_API_KEY_HERE" with your actual Mistral key.
    // WARNING: This is visible in page source.
    const MISTRAL_API_KEY = "Qo3UkuQbLN35xKltzOVEQ0nLfgBG7mvq"; 

    /********************************************
     * 2) Simple Page Navigation (show/hide)    *
     ********************************************/
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(sec => {
        sec.style.display = 'none';
      });
      document.getElementById(pageId).style.display = 'block';
    }

    // By default, show only page1
    window.onload = () => {
      document.querySelectorAll('.page').forEach(sec => sec.style.display = 'none');
      document.getElementById('page1').style.display = 'block';
    };

    /********************************************
     * 3) Gather Inputs & Call Mistral API      *
     ********************************************/
    async function generatePackingList() {
      // Gather the 11 fields
      const data = {
        destination: document.getElementById('destination').value,
        travelDates: document.getElementById('travelDates').value,
        duration: document.getElementById('duration').value,
        travelType: document.getElementById('travelType').value,
        activities: document.getElementById('activities').value,
        accommodationType: document.getElementById('accommodationType').value,
        luggageType: document.getElementById('luggageType').value,
        gender: document.getElementById('gender').value,
        kids: document.getElementById('kids').value,
        firstTime: document.getElementById('firstTime').value,
        specialNeeds: document.getElementById('specialNeeds').value
      };

      // Build a prompt for Mistral (example)
      const prompt = `
        You are a travel packing assistant.
        The user is going to ${data.destination} from ${data.travelDates} for ${data.duration} days.
        Travel type: ${data.travelType}. Activities: ${data.activities}.
        Accommodation: ${data.accommodationType}, Luggage: ${data.luggageType}.
        Gender: ${data.gender}, With kids: ${data.kids}, 
        First-time traveler: ${data.firstTime}, Special needs: ${data.specialNeeds}.
        Please provide a categorized packing list into 
        Clothes, Toiletries, Gadgets, Travel Docs, Meds, Optional Extras.
      `;

      try {
        // 4) Call Mistral API directly from front-end
        //    Replace the URL if Mistral’s endpoint is different
        const response = await fetch("https://api.mistralai.com/v1/generate", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${MISTRAL_API_KEY}`
          },
          body: JSON.stringify({
            // If Mistral expects a different field name, adjust here
            prompt: prompt
            // e.g. temperature: 0.7, max_tokens: 500, etc.
          })
        });

        if (!response.ok) {
          throw new Error(`Mistral API error: ${response.statusText}`);
        }

        // 5) Parse the result. Mistral’s real response may differ.
        const result = await response.json();
        const packingText = result.text || JSON.stringify(result);

        // 6) Switch to "Packing List" page & display
        showPage('page3');
        document.getElementById('packingListOutput').innerHTML = `<pre>${packingText}</pre>`;

      } catch (err) {
        alert("Error: " + err.message);
        console.error(err);
      }
    }
  </script>
</body>
</html>
