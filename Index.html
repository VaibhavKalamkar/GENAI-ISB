<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pack My Bag</title>
  <!-- Link to external CSS -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Optional: Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link 
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" 
    rel="stylesheet">
</head>
<body>

  <!-- SHARED HEADER -->
  <header class="site-header">
    <div class="container">
      <div class="logo">Pack My Bag</div>
      <nav class="nav-menu">
        <ul>
          <li><a href="#">About</a></li>
          <li><a href="#">Contact</a></li>
          <li><a href="#">Privacy</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>

    <!-- PAGE 1: Index / Landing Page -->
    <section id="page1" class="page active">
      <!-- Hero Section -->
      <div class="hero-section">
        <h1>Never Forget What to Pack Again</h1>
        <p>AI-powered packing lists customized for your trip.</p>
        <!-- Link to Trip Details Page -->
        <button class="cta-btn" onclick="showPage('page2')">Start Packing</button>
      </div>

      <!-- How It Works -->
      <section class="how-it-works">
        <h2>How It Works</h2>
        <div class="steps">
          <div class="step">
            <h3>1. Enter Your Trip Details</h3>
            <p>Destination, dates, activities &amp; more.</p>
          </div>
          <div class="step">
            <h3>2. Get Your List</h3>
            <p>Personalized, weather-aware packing suggestions.</p>
          </div>
          <div class="step">
            <h3>3. Pack With Peace of Mind</h3>
            <p>Check items off and travel worry-free.</p>
          </div>
        </div>
      </section>

      <!-- Key Features -->
      <section class="key-features">
        <h2>Key Features</h2>
        <div class="features-list">
          <div class="feature-item">
            <h4>Group Coordination</h4>
            <p>Plan who brings what in a shared list.</p>
          </div>
          <div class="feature-item">
            <h4>Smart Weather-Aware</h4>
            <p>No umbrella if it’s sunny all week.</p>
          </div>
          <div class="feature-item">
            <h4>Save &amp; Reuse Lists</h4>
            <p>Keep your packing templates for future trips.</p>
          </div>
          <div class="feature-item">
            <h4>AI Recommendations</h4>
            <p>Must-haves based on destination &amp; activities.</p>
          </div>
          <div class="feature-item">
            <h4>Community Tips</h4>
            <p>Get real traveler insights for your location.</p>
          </div>
        </div>
      </section>

      <!-- Testimonial -->
      <section class="testimonial-section">
        <h2>Real-Life Use Case / Testimonial</h2>
        <div class="testimonial">
          <p>
            <strong>“Pack My Bag helped me perfectly prepare for my weekend in Coorg!”</strong><br>
            — Ayesha, Weekend Wanderer
          </p>
        </div>
      </section>

      <!-- Newsletter Signup -->
      <section class="newsletter-section">
        <h2>Join the Beta / Newsletter Signup</h2>
        <p>Want to be a smarter traveler?</p>
        <div class="newsletter-form">
          <input type="email" placeholder="Your email address" />
          <button class="cta-btn">Join Now</button>
        </div>
      </section>
    </section>
    <!-- END PAGE 1 -->


    <!-- PAGE 2: Trip Details -->
    <section id="page2" class="page">
      <div class="trip-details-container">
        <!-- Trip Details Form -->
        <div class="trip-form">
          <h2>Enter Trip Details</h2>
          <label for="destination">Destination(s):</label>
          <input type="text" id="destination" placeholder="e.g. Paris, Coorg" />

          <label for="travel-dates">Travel Dates:</label>
          <input type="text" id="travel-dates" placeholder="e.g. 2023-05-10 to 2023-05-15" />

          <label for="duration">Duration:</label>
          <input type="number" id="duration" placeholder="Number of days" />

          <label for="travel-type">Travel Type:</label>
          <select id="travel-type">
            <option>Leisure</option>
            <option>Business</option>
            <option>Adventure</option>
            <option>Backpacking</option>
          </select>

          <label for="activities">Activities Planned:</label>
          <input type="text" id="activities" placeholder="Hiking, beach, city tours" />

          <label for="accommodation">Accommodation Type:</label>
          <select id="accommodation">
            <option>Hotel</option>
            <option>Hostel</option>
            <option>Camping</option>
            <option>Airbnb</option>
          </select>

          <label for="luggage-type">Luggage Type:</label>
          <select id="luggage-type">
            <option>Checked-in</option>
            <option>Cabin only</option>
            <option>Backpack</option>
          </select>

          <!-- MODIFIED: Now calls generatePackingList() instead of showPage('page3') -->
          <button class="cta-btn" onclick="generatePackingList()">Generate Packing List</button>
        </div>

        <!-- Optional Filters & Tips -->
        <div class="optional-filters">
          <h2>Optional Filters</h2>
          <label for="gender">Gender:</label>
          <select id="gender">
            <option value="">Select</option>
            <option>Male</option>
            <option>Female</option>
            <option>Other</option>
          </select>

          <label for="kids">Traveling with kids?</label>
          <select id="kids">
            <option value="">No</option>
            <option>Yes</option>
          </select>

          <label for="first-time">First-time Traveler?</label>
          <select id="first-time">
            <option value="">No</option>
            <option>Yes</option>
          </select>

          <label for="special-needs">Special Needs:</label>
          <input type="text" id="special-needs" placeholder="Meds, baby stuff, camera gear..." />

          <div class="travel-tips">
            <h3>Travel Tips</h3>
            <ul>
              <li>Always keep a digital copy of important docs.</li>
              <li>Research local customs to avoid faux pas.</li>
              <li>Pack versatile clothing for different climates.</li>
              <li>Check luggage size restrictions carefully.</li>
              <li>Review travel insurance coverage.</li>
            </ul>
          </div>
        </div>

        <!-- Example Weather / Currency Info (optional) -->
        <div class="sidebar-info">
          <h3>Weather Forecast</h3>
          <p>Sunny, 25°C<br>Cloudy, 22°C<br>Rainy, 19°C</p>

          <h3>Currency Rates</h3>
          <p>USD: 1<br>EUR: 0.85<br>GBP: 0.75</p>
        </div>
      </div>
    </section>
    <!-- END PAGE 2 -->


    <!-- PAGE 3: Packing List -->
    <section id="page3" class="page">
      <div class="packing-list-container">
        <!-- Sidebar -->
        <div class="sidebar">
          <h2>Reminders</h2>
          <label><input type="checkbox" /> Items not packed</label><br>
          <label><input type="checkbox" /> To-do tasks</label><br>
          <button>Save Packing Profile</button>
          <button>Share with Travel Buddies</button>
        </div>

        <!-- Packing List -->
        <div class="packing-list">
          <h2>Packing List</h2>

          <!-- We keep the original placeholders... -->
          <div class="item-category">
            <h3>Clothes</h3>
            <label><input type="checkbox" /> 5 Shirts</label><br>
            <label><input type="checkbox" /> 2 Pairs of Trousers</label>
            <!-- ...plus a dynamic output area for Mistral -->
            <div id="clothesOutput"></div>
          </div>

          <div class="item-category">
            <h3>Toiletries</h3>
            <label><input type="checkbox" /> Toothbrush &amp; Paste</label><br>
            <label><input type="checkbox" /> Shampoo</label>
            <div id="toiletriesOutput"></div>
          </div>

          <div class="item-category">
            <h3>Gadgets</h3>
            <label><input type="checkbox" /> Phone Charger</label><br>
            <label><input type="checkbox" /> Power Adapter for Europe</label>
            <div id="gadgetsOutput"></div>
          </div>

          <div class="item-category">
            <h3>Travel Docs</h3>
            <label><input type="checkbox" /> Passport</label><br>
            <label><input type="checkbox" /> Boarding Pass</label>
            <div id="docsOutput"></div>
          </div>

          <div class="item-category">
            <h3>Meds</h3>
            <label><input type="checkbox" /> Painkillers</label><br>
            <label><input type="checkbox" /> Allergy meds</label>
            <div id="medsOutput"></div>
          </div>

          <div class="item-category">
            <h3>Optional Extras</h3>
            <label><input type="checkbox" /> Sunglasses</label><br>
            <label><input type="checkbox" /> Travel Pillow</label>
            <div id="extrasOutput"></div>
          </div>

          <p class="weight-estimator">Estimated weight: 12 kg</p>

          <button>Export PDF</button>
          <button>Email List</button>
          <!-- Link to Group Pack List Page -->
          <button class="cta-btn" onclick="showPage('page4')">Create Group Pack List</button>
        </div>
      </div>
    </section>
    <!-- END PAGE 3 -->


    <!-- PAGE 4: Group Packing List -->
    <section id="page4" class="page">
      <div class="group-list-container">
        <h2>Share List With</h2>
        <label><input type="checkbox" /> Alice Johnson</label><br>
        <label><input type="checkbox" /> Bob Smith</label><br>
        <label><input type="checkbox" /> Charlie Brown</label><br>
        <button>Manage Sharing</button>

        <h2>Packing List</h2>
        <div class="packing-item">
          <label for="item1">Toothbrush</label>
          <select id="item1">
            <option>Assign to...</option>
            <option>Alice</option>
            <option>Bob</option>
            <option>Charlie</option>
          </select>
          <button>Add Item</button>
        </div>
        <div class="packing-item">
          <label for="item2">Sunscreen</label>
          <select id="item2">
            <option>Assign to...</option>
            <option>Alice</option>
            <option>Bob</option>
            <option>Charlie</option>
          </select>
          <button>Add Item</button>
        </div>
        <div class="packing-item">
          <input type="text" placeholder="New item name..." />
          <select>
            <option>Assign to...</option>
            <option>Alice</option>
            <option>Bob</option>
            <option>Charlie</option>
          </select>
          <button>Add Item</button>
        </div>
      </div>
    </section>
    <!-- END PAGE 4 -->

  </main>

  <!-- SHARED FOOTER -->
  <footer class="site-footer">
    <div class="container">
      <p>&copy; 2023 Pack My Bag. All rights reserved.</p>
    </div>
  </footer>

  <!-- SIMPLE JS TOGGLE LOGIC + MISTRAL INTEGRATION -->
  <script>
    /*************************************************
     * 1) Show/hide pages (unchanged)
     *************************************************/
    function showPage(pageId) {
      // Hide all .page sections
      document.querySelectorAll('.page').forEach(section => {
        section.style.display = 'none';
      });
      // Show the selected page
      document.getElementById(pageId).style.display = 'block';
    }

    // By default, show page1 (index)
    window.onload = () => {
      document.querySelectorAll('.page').forEach(section => {
        section.style.display = 'none';
      });
      document.getElementById('page1').style.display = 'block';
    };

    /*************************************************
     * 2) Mistral API Key (Front-End Only - Not Secure)
     *************************************************/
    // Replace with your actual Mistral AI key
    const MISTRAL_API_KEY = "Qo3UkuQbLN35xKltzOVEQ0nLfgBG7mvq";

    /*************************************************
     * 3) Gather 11 Fields & Fetch Mistral Recommendation
     *************************************************/
    async function generatePackingList() {
      // Collect the 11 fields from the form
      const data = {
        destination: document.getElementById('destination').value,
        travelDates: document.getElementById('travel-dates').value,
        duration: document.getElementById('duration').value,
        travelType: document.getElementById('travel-type').value,
        activities: document.getElementById('activities').value,
        accommodationType: document.getElementById('accommodation').value,
        luggageType: document.getElementById('luggage-type').value,
        gender: document.getElementById('gender').value,
        kids: document.getElementById('kids').value,
        firstTime: document.getElementById('first-time').value,
        specialNeeds: document.getElementById('special-needs').value
      };

      // Build a prompt to send to Mistral AI
      const prompt = `
        You are a travel packing assistant.
        The user is going to ${data.destination} from ${data.travelDates} 
        for ${data.duration} days. Travel type: ${data.travelType}.
        Activities: ${data.activities}. Accommodation: ${data.accommodationType}, 
        Luggage: ${data.luggageType}.
        Gender: ${data.gender}, With kids: ${data.kids}, 
        First-time traveler: ${data.firstTime}, Special needs: ${data.specialNeeds}.
        Please provide a categorized packing list into Clothes, Toiletries, 
        Gadgets, Travel Docs, Meds, Optional Extras.
      `;

      try {
        // Fetch from Mistral AI endpoint (example endpoint below)
        const response = await fetch("https://api.mistralai.com/v1/generate", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${MISTRAL_API_KEY}`
          },
          body: JSON.stringify({ prompt })
        });

        if (!response.ok) {
          throw new Error(`Mistral API error: ${response.statusText}`);
        }

        // Parse Mistral's response
        // Adjust parsing if Mistral's actual response differs
        const result = await response.json();
        // Suppose the text is in result.text
        const packingResponse = result.text || JSON.stringify(result);

        // Example: We simply display the raw text or parse it into categories.
        // For a real app, you'd parse the AI output & fill each category.
        // We'll just put the entire result into each category output for demo.
        document.getElementById('clothesOutput').textContent = packingResponse;
        document.getElementById('toiletriesOutput').textContent = packingResponse;
        document.getElementById('gadgetsOutput').textContent = packingResponse;
        document.getElementById('docsOutput').textContent = packingResponse;
        document.getElementById('medsOutput').textContent = packingResponse;
        document.getElementById('extrasOutput').textContent = packingResponse;

        // Finally, show the "Packing List" page
        showPage('page3');

      } catch (err) {
        alert("Error: " + err.message);
        console.error(err);
      }
    }
  </script>

</body>
</html>
